---

## โ ุจุฑููุจุช ุงุญุชุฑุงูู ูุจูุงุก ุชุทุจูู ูุดุจู Seneca CarFax ุจุงุณุชุฎุฏุงู React Native + Supabase

> ุฃุฑูุฏู ุฃู ุชุชุตุฑู ููุทูุฑ ูุญุชุฑู ูุจูุงุก ูุธุงู ูุชูุงูู ูุตูุงูุฉ ุงูุณูุงุฑุงุช ูุดุจู Seneca CarFax ุจุงุณุชุฎุฏุงู React Native ููุชุทุจูู ู Supabase ูุฎูููุฉ.  
> ุงููุธุงู ูุฎุฏู ูุญูุงุช ุงูุตูุงูุฉุ ุฃุตุญุงุจ ุงูุณูุงุฑุงุชุ ููุดุฑููู ุฅุฏุงุฑููู (Admin) ูู ุฎูุงู ููุญุฉ ุชุญูู ูุชูุงููุฉ.

### ๐จโ๐ง ุฃุตุญุงุจ ุงููุญูุงุช:
- ูุณุฌููู ุญุณุงุจ ุฌุฏูุฏ ุนุจุฑ ูููุฐุฌ ูุดูู:
  - ุงุณู ุงููุญู
  - ุงุณู ุงููุงูู
  - ุฑูู ุงูุฌูุงู
  - ุงูุนููุงู ูุงููููุน ุงูุฌุบุฑุงูู
- ูุชู ุฅุฑุณุงู ุทูุจ ุงูููุงููุฉ ุฅูู ุงูู Owner (Admin).
- ุจุนุฏ ุงููุจููุ ูููููู:
  - ุนูู Scan ูู QR Code ููุณูุงุฑุฉ.
  - ุฅุฏุฎุงู ุจูุงูุงุช ุงูุณูุงุฑุฉ (ุฅุฐุง ุฌุฏูุฏุฉ) ุฃู ุงูุฏุฎูู ูุณุฌููุง.
  - ุชุณุฌูู ุฒูุงุฑุงุช ุงูุตูุงูุฉ: ุชุงุฑูุฎุ ููุน ุฎุฏูุฉุ ุงูุนุฏุงุฏุ ุงูููุงุญุธุงุชุ ุงูุณุนุฑ.
  - ุฑุจุท ุงูุณูุงุฑุฉ ุจุงูุนููู (ุงุณูุ ุฑูู ุฌูุงูุ ุฑูู ุงูุณูุงุฑุฉ).

### ๐ ุฅุฏุงุฑุฉ ุงููุฑูุจุงุช:
- ูู ูุฑูุจุฉ ููุง:
  - QR Code ูุฑูุฏ ููุซู `car_id`
  - ููุน ุงููุฑูุจุฉ + ุทุฑุงุฒูุง (Model, Make)
  - ุณุฌู ุตูุงูุฉ ููุตู.
- ุฌุฏูู ุฎุงุต ุจุฃููุงุน ุงููุฑูุจุงุช ูุงูุทุฑุงุฒุงุช ูุชุณููู ุงูุงุฎุชูุงุฑ.
  
### ๐ฅ ุงูุนููุงุก (ูุงููู ุงูุณูุงุฑุงุช):
- ูููููู:
  - ูุณุญ QR Code ุงูุฎุงุต ุจุณูุงุฑุชูู.
  - ุนุฑุถ ุชูุงุตูู ูุฑูุจุชูู ูุณุฌู ุงูุตูุงูุฉ.
  - ุฑุคูุฉ ูุนูููุงุช ุงููุญู ุงูุฐู ุฎุฏููู (ุงุณูุ ูููุนุ ุฑูู).
  - ุชูุนูู ุฅุดุนุงุฑุงุช ุงูุชุฐููุฑ ูุชุบููุฑ ุงูุฒูุช ุงููุงุฏู.

### ๐งพ ููุญุฉ ุชุญูู CarFax (Dashboard Admin):
- ุฑุคูุฉ ูู ุงููุญูุงุช ุงููุณุฌูุฉ ูุฅุฏุงุฑุชูุง.
- ูุจูู/ุฑูุถ ุทูุจุงุช ุชุณุฌูู ุงููุญูุงุช.
- ุนุฑุถ ูู ุงููุฑูุจุงุช ุงููุณุฌูุฉ ูุฑุจุทูุง ุจุงููุณุชุฎุฏููู ูุงููุญูุงุช.
- ุฅุฏุงุฑุฉ ูุฆุงุช ุงูุตูุงูุฉ (ูุซูุงู: ุชุบููุฑ ุฒูุชุ ูุญุต ูุฑุงููุ ุชุจุฏูู ุจุทุงุฑูุฉ).
- ุชุญููู ุงูุนูููุงุช (ุนุฏุฏ ุฒูุงุฑุงุชุ ุฃุนูู ุงููุญูุงุช ูุดุงุทูุงุ ุฃูุซุฑ ุงูุฎุฏูุงุช ุงุณุชุฎุฏุงููุง).
- ุฅููุงููุฉ ุงูุชุนุฏูู/ุงูุญุฐู ูุฃู ุณุฌู.

### ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูููุชุฑุญุฉ:
- `users` (roles: admin, shop_owner, customer)
- `shops` (shop_name, location, owner_id, status)
- `cars` (qr_id, make, model, year, shop_id, customer_id)
- `service_categories` (name, description)
- `oil_changes` / `service_visits` (car_id, service_id, date, mileage, notes, shop_id)
- `shop_requests` (pending requests to be approved)
- `vehicle_types` ู `models` (ูุนุฑุถ ุงูุฃููุงุน ูุงูุทุฑุงุฒุงุช ุจุดูู ููุธู)
- `notifications` (ูุชุฐููุฑ ุงูุนููุงุก ุจููุนุฏ ุงูุฎุฏูุฉ ุงููุงุฏูุฉ)

### ๐ง ุงููุทููุจ ููู ููุทูุฑ:
- ุชุตููู ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุงุกู ุนูู ูุฐุง ุงููููุฐุฌ.
- ุชุญุฏูุฏ ุชุฏูู ุงูุดุงุดุงุช ููู ููุน ูุณุชุฎุฏู (ุตุงุญุจ ูุญูุ ุนูููุ Admin).
- ุชุญุฏูุฏ ุงูููุชุจุงุช ุงูููุงุณุจุฉ:
  - react-native-vision-camera: `vision-camera-code-scanner`
  - State Management: `zustand` ุฃู `redux`
  - UI: `React Native Paper` ุฃู `Native Base`
- ุจูุงุก ูุธุงู ุชุณุฌูู ุฏุฎูู ูุนุชูุฏ ุนูู Roles (user type).
- ุชูููุฑ Web Admin Panel (ูููู ูููู ุจู Next.js) ูุฅุฏุงุฑุฉ ุงููุธุงู.

---

ูู ุชุฑุบุจ ุฃุจุฏุฃ ุงูุขู ุจุฅุนุฏุงุฏ **schema ุจุตูุบุฉ JSON ุฃู SQL** ููุงุนุฏุฉ ุงูุจูุงูุงุชุ ุฃู ุชูุถู ุฃุฌูุฒ ูู **UX Flow ูุชุฏูู ุงูุดุงุดุงุช** ุฃูููุงุ
## ุงูุฎุทูุฉ 2: ุชูููู Supabase

ูู ุจุฅูุดุงุก ููู `app/config/index.ts` ููุงุชุตุงู ุจู Supabase:

```typescript
// app/config/index.ts
import { createClient } from '@supabase/supabase-js';

const ENV = {
  dev: {
    SUPABASE_URL: 'https://egnvrxqoamgpjtmhnhri.supabase.co',
    SUPABASE_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVnbnZyeHFvYW1ncGp0bWhuaHJpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzU5Mzk4MjYsImV4cCI6MjA1MTUxNTgyNn0.aVuGbcFp8vXTMKMLWq-JcWs7cXM8Iuw3f0N1iTO7qOo',
    API_URL: 'https://egnvrxqoamgpjtmhnhri.supabase.co',
  },
  prod: {
    SUPABASE_URL: 'https://egnvrxqoamgpjtmhnhri.supabase.co',
    SUPABASE_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVnbnZyeHFvYW1ncGp0bWhuaHJpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzU5Mzk4MjYsImV4cCI6MjA1MTUxNTgyNn0.aVuGbcFp8vXTMKMLWq-JcWs7cXM8Iuw3f0N1iTO7qOo',
    API_URL: 'https://egnvrxqoamgpjtmhnhri.supabase.co',
  }
};

// ุชุญุฏูุฏ ุงูุจูุฆุฉ ุงูุญุงููุฉ
const environment = 'dev';
const currentEnv = ENV[environment as keyof typeof ENV];

// ุชุตุฏูุฑ ุงููุชุบูุฑุงุช
export const SUPABASE_URL = currentEnv.SUPABASE_URL;
export const SUPABASE_KEY = currentEnv.SUPABASE_KEY;
export const API_URL = currentEnv.API_URL;

// ุฅูุดุงุก ุนููู Supabase
export const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

// ุชูููู ุงูุชุทุจูู ุงูุนุงู
export const APP_CONFIG = {
  APP_NAME: 'YazCar',
  VERSION: '1.0.0',
};
```

## ุงูุฎุทูุฉ 3: ุฅูุดุงุก ุงูุฃููุงุน (Types)

ูู ุจุฅูุดุงุก ููู `app/types/index.ts` ูุชุนุฑูู ุงูุฃููุงุน:

```typescript
// app/types/index.ts
export enum UserRole {
  ADMIN = 'admin',
  SHOP_OWNER = 'shop_owner',
  CUSTOMER = 'customer',
}

export type User = {
  id: string;
  email: string;
  name: string;
  phone: string;
  role: UserRole;
  created_at: string;
};

export type Shop = {
  id: string;
  name: string;
  owner_id: string;
  phone: string;
  address: string;
  location: {
    latitude: number;
    longitude: number;
  };
  status: 'pending' | 'approved' | 'rejected';
  created_at: string;
};

export type Car = {
  id: string;
  qr_id: string;
  make: string;
  model: string;
  year: number;
  customer_id: string;
  plate_number: string;
  created_at: string;
};

export type ServiceCategory = {
  id: string;
  name: string;
  description: string;
};

export type ServiceVisit = {
  id: string;
  car_id: string;
  shop_id: string;
  service_category_id: string;
  date: string;
  mileage?: number;
  notes?: string;
  price: number;
  next_service_reminder?: string;
};

export type VehicleType = {
  id: string;
  name: string;
};

export type VehicleModel = {
  id: string;
  type_id: string;
  name: string;
  year_start: number;
  year_end?: number;
};
```

## ุงูุฎุทูุฉ 4: ุฅุนุฏุงุฏ ูุฎุฒู ุงูุญุงูุฉ (State Store)

ูู ุจุฅูุดุงุก ููู `app/utils/store.ts` ุจุงุณุชุฎุฏุงู Zustand:

```typescript
// app/utils/store.ts
import { create } from 'zustand';
import { User, UserRole } from '../types';

interface AuthState {
  user: User | null;
  token: string | null;
  isAuthenticated: boolean;
  setUser: (user: User | null) => void;
  setToken: (token: string | null) => void;
  setIsAuthenticated: (isAuthenticated: boolean) => void;
  logout: () => void;
}

export const useAuthStore = create<AuthState>((set) => ({
  user: null,
  token: null,
  isAuthenticated: false,
  setUser: (user) => set({ user, isAuthenticated: !!user }),
  setToken: (token) => set({ token }),
  setIsAuthenticated: (isAuthenticated) => set({ isAuthenticated }),
  logout: () => set({ user: null, token: null, isAuthenticated: false }),
}));
```

## ุงูุฎุทูุฉ 5: ุฅูุดุงุก ุฎุฏูุงุช ุงููุตุงุฏูุฉ

ูู ุจุฅูุดุงุก ููู `app/services/auth.ts`:

```typescript
// app/services/auth.ts
import AsyncStorage from '@react-native-async-storage/async-storage';
import { supabase } from '../config';
import { UserRole } from '../types';

const TOKEN_KEY = 'yazcar_auth_token';
const USER_KEY = 'yazcar_user_data';

export interface AuthUser {
  id: string;
  email: string;
  name: string;
  phone: string;
  role: 'shop_owner' | 'customer' | 'admin';
  shop_id?: string;
  created_at: string;
}

/**
 * ุชุณุฌูู ุงูุฏุฎูู
 */
export const signIn = async (email: string, password: string, rememberMe: boolean = true) => {
  try {
    console.log('ูุญุงููุฉ ุชุณุฌูู ุงูุฏุฎูู:', { email, rememberMe });
    
    const { data, error } = await supabase.auth.signInWithPassword({
      email,
      password,
    });

    if (error) {
      console.log('ุฎุทุฃ ูู ูุตุงุฏูุฉ Supabase:', error);
      throw error;
    }

    console.log('ูุฌุงุญ ุงููุตุงุฏูุฉ ูุน Supabase');
    const { user, session } = data;
    
    if (user && session) {
      console.log('ูุนุฑู ุงููุณุชุฎุฏู ูู ุงููุตุงุฏูุฉ:', user.id);
      
      // ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุฅุถุงููุฉ ูู ุฌุฏูู ุงููุณุชุฎุฏููู
      const { data: userData, error: userError } = await supabase
        .from('users')
        .select('*')
        .eq('id', user.id)
        .maybeSingle();
      
      console.log('ูุชูุฌุฉ ุงูุจุญุซ ุนู ุงููุณุชุฎุฏู ูู ุฌุฏูู users:', { userData, userError });
      
      if (userError) {
        console.log('ุฎุทุฃ ูู ุงูุจุญุซ ุนู ุงููุณุชุฎุฏู:', userError);
        throw userError;
      }
      
      if (!userData) {
        console.log('ูู ูุชู ุงูุนุซูุฑ ุนูู ุงููุณุชุฎุฏู ูู ุฌุฏูู users');
        throw new Error('ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู');
      }

      console.log('ุชู ุงูุนุซูุฑ ุนูู ุงููุณุชุฎุฏู ูุฌุงุฑู ุญูุธ ุงูุจูุงูุงุช');
      // ุญูุธ ุจูุงูุงุช ุงููุณุชุฎุฏู ูุฑูุฒ ุงููุตุงุฏูุฉ ูู ุงูุชุฎุฒูู ุงููุญูู ุฅุฐุง ูุงู "ุชุฐูุฑูู" ููุนูุงู
      if (rememberMe) {
        await AsyncStorage.setItem(TOKEN_KEY, session.access_token);
        await AsyncStorage.setItem(USER_KEY, JSON.stringify(userData));
        console.log('ุชู ุญูุธ ุจูุงูุงุช ุงููุณุชุฎุฏู ูุงูุฌูุณุฉ ูุญููุงู');
      }

      return {
        data: {
          user: userData,
          session,
        },
        error: null,
      };
    }

    return { data, error: null };
  } catch (error) {
    console.log('ุฎุทุฃ ุบูุฑ ูุชููุน ูู ุชุณุฌูู ุงูุฏุฎูู:', error);
    return { data: null, error };
  }
};

/**
 * ุชุณุฌูู ุงูุฎุฑูุฌ
 */
export const signOut = async () => {
  try {
    const { error } = await supabase.auth.signOut();
    if (error) throw error;
    
    await AsyncStorage.removeItem(TOKEN_KEY);
    await AsyncStorage.removeItem(USER_KEY);

    return { error: null };
  } catch (error) {
    return { error };
  }
};

/**
 * ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุณุฌู ุฏุฎููู
 */
export const getCurrentUser = async (): Promise<{ user: AuthUser | null; error: any }> => {
  try {
    const userJson = await AsyncStorage.getItem(USER_KEY);
    
    if (!userJson) {
      return { user: null, error: null };
    }
    
    const user = JSON.parse(userJson) as AuthUser;
    return { user, error: null };
  } catch (error: any) {
    return {
      user: null,
      error: {
        message: error.message || 'ูุดู ูู ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู',
      },
    };
  }
};

/**
 * ุงูุชุญูู ูู ุญุงูุฉ ุงููุตุงุฏูุฉ ูููุณุชุฎุฏู
 */
export const checkAuthStatus = async () => {
  try {
    const { data, error } = await supabase.auth.getSession();
    if (error) throw error;
    
    if (data?.session) {
      const { user } = data.session;
      
      // ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุฅุถุงููุฉ ูู ุงูุชุฎุฒูู ุงููุญูู
      const { user: storedUser, error: userError } = await getCurrentUser();
      
      if (userError) throw userError;
      
      if (storedUser) {
        return {
          isAuthenticated: true,
          user: storedUser,
          error: null,
        };
      }
      
      // ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ุงูุชุฎุฒูู ุงููุญููุ ูููู ุจุฌูุจูุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
      const { data: userData, error: userError2 } = await supabase
        .from('users')
        .select('*')
        .eq('id', user.id)
        .maybeSingle();
        
      if (userError2) throw userError2;
      
      if (userData) {
        await AsyncStorage.setItem(USER_KEY, JSON.stringify(userData));
        
        return {
          isAuthenticated: true,
          user: userData,
          error: null,
        };
      }
    }
    
    return {
      isAuthenticated: false,
      user: null,
      error: null,
    };
  } catch (error) {
    return {
      isAuthenticated: false,
      user: null,
      error,
    };
  }
};
```

## ุงูุฎุทูุฉ 6: ุฅูุดุงุก ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

ูู ุจุฅูุดุงุก ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ุจูุณุงุฑ Expo Router ุงูุตุญูุญ:

```typescript
// app/auth/login.tsx
import React, { useState } from 'react';
import { StyleSheet, View, TouchableOpacity, KeyboardAvoidingView, Platform, ScrollView } from 'react-native';
import { Text, Checkbox } from 'react-native-paper';
import { COLORS, SPACING } from '../constants';
import Input from '../components/Input';
import Button from '../components/Button';
import ErrorMessage from '../components/ErrorMessage';
import Loading from '../components/Loading';
import { signIn } from '../services/auth';
import Icon from 'react-native-vector-icons/MaterialCommunityIcons';
import { useAuthStore } from '../utils/store';
import { useRouter } from 'expo-router';

export default function LoginScreen() {
  const router = useRouter();
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const [rememberMe, setRememberMe] = useState(true);
  const { setUser, setIsAuthenticated } = useAuthStore();

  const handleLogin = async () => {
    if (!email || !password) {
      setError('ูุฑุฌู ุฅุฏุฎุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ');
      return;
    }

    if (loading) return;
    
    setLoading(true);
    setError('');

    try {
      const { data, error: loginError } = await signIn(email, password, rememberMe);
      
      if (loginError) {
        setError(typeof loginError === 'object' && loginError !== null && 'message' in loginError 
          ? String(loginError.message) 
          : 'ูุดู ุชุณุฌูู ุงูุฏุฎูู');
        return;
      }

      // ูุฌุงุญ ุชุณุฌูู ุงูุฏุฎูู - ุชุนููู ุญุงูุฉ ุงููุณุชุฎุฏู ูุชูุนูู ุงููุตุงุฏูุฉ
      if (data?.user) {
        setUser(data.user);
        setIsAuthenticated(true);
      }
    } catch (err: any) {
      setError(err.message || 'ูุดู ุชุณุฌูู ุงูุฏุฎูู');
    } finally {
      setLoading(false);
    }
  };

  return (
    <KeyboardAvoidingView
      style={styles.container}
      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
      keyboardVerticalOffset={80}
    >
      <ScrollView
        contentContainerStyle={styles.scrollContent}
        keyboardShouldPersistTaps="handled"
      >
        <View style={styles.logoContainer}>
          <Icon name="car-wrench" size={100} color={COLORS.primary} />
          <Text style={styles.logoText}>ููุฒู ูุงุฑ</Text>
        </View>
        
        <View style={styles.formContainer}>
          {error ? (
            <ErrorMessage
              message={error}
              onDismiss={() => setError('')}
            />
          ) : null}

          <Input
            label="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู"
            value={email}
            onChangeText={setEmail}
            keyboardType="email-address"
            autoCapitalize="none"
            icon="email"
          />

          <Input
            label="ูููุฉ ุงููุฑูุฑ"
            value={password}
            onChangeText={setPassword}
            secureTextEntry
            icon="lock"
          />

          <View style={styles.rememberMeContainer}>
            <Checkbox
              status={rememberMe ? 'checked' : 'unchecked'}
              onPress={() => setRememberMe(!rememberMe)}
              color={COLORS.primary}
            />
            <TouchableOpacity onPress={() => setRememberMe(!rememberMe)}>
              <Text style={styles.rememberMeText}>ุชุฐูุฑูู</Text>
            </TouchableOpacity>
          </View>

          <Button
            title="ุชุณุฌูู ุงูุฏุฎูู"
            onPress={handleLogin}
            loading={loading}
            disabled={loading}
            style={styles.loginButton}
          />

          <TouchableOpacity 
            onPress={() => router.push("/auth/forgot-password")}
            style={styles.forgotPasswordLink}
          >
            <Text style={styles.forgotPasswordText}>ูุณูุช ูููุฉ ุงููุฑูุฑุ</Text>
          </TouchableOpacity>

          <View style={styles.registerContainer}>
            <Text style={styles.registerText}>ููุณ ูุฏูู ุญุณุงุจุ</Text>
            <TouchableOpacity onPress={() => router.push("/auth/register")}>
              <Text style={styles.registerLink}>ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</Text>
            </TouchableOpacity>
          </View>
        </View>
        
        {loading && <Loading fullScreen message="ุฌุงุฑู ุชุณุฌูู ุงูุฏุฎูู..." />}
      </ScrollView>
    </KeyboardAvoidingView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.background,
  },
  scrollContent: {
    flexGrow: 1,
    padding: SPACING.lg,
  },
  logoContainer: {
    alignItems: 'center',
    marginVertical: SPACING.xl,
  },
  title: {
    fontSize: 28,
    fontWeight: 'bold',
    color: COLORS.primary,
    marginTop: SPACING.md,
  },
  formContainer: {
    marginVertical: SPACING.xl,
  },
  rememberMeContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    marginTop: SPACING.sm,
  },
  rememberMeText: {
    color: COLORS.gray,
    marginRight: 8,
  },
  loginButton: {
    marginTop: SPACING.lg,
  },
  forgotPasswordLink: {
    marginTop: SPACING.md,
    alignSelf: 'center',
  },
  forgotPasswordText: {
    color: COLORS.primary,
    fontSize: 14,
  },
  registerContainer: {
    flexDirection: 'row',
    justifyContent: 'center',
    marginTop: SPACING.xl,
  },
  registerText: {
    color: COLORS.gray,
    marginRight: 5,
  },
  registerLink: {
    color: COLORS.primary,
    fontWeight: 'bold',
  },
  logoText: {
    fontSize: 24,
    fontWeight: 'bold',
    color: COLORS.primary,
    marginTop: SPACING.md,
  },
});
```

## ุงูุฎุทูุฉ 7: ุฅูุดุงุก ูููุงุช ุงูุชุฎุทูุท (Layouts)

### ููู ุงูุชุฎุทูุท ุงูุฑุฆูุณู
```typescript
// app/_layout.tsx
import React, { useEffect } from 'react';
import { Stack } from 'expo-router';
import { useColorScheme } from 'react-native';
import { Provider as PaperProvider } from 'react-native-paper';
import { useAuthStore } from './utils/store';
import { checkAuthStatus } from './services/auth';

export default function RootLayout() {
  const colorScheme = useColorScheme();
  const { setUser, setIsAuthenticated } = useAuthStore();

  useEffect(() => {
    async function loadAuthStatus() {
      try {
        const { isAuthenticated, user, error } = await checkAuthStatus();
        if (error) {
          console.error('ูุดู ูู ุงูุชุญูู ูู ุญุงูุฉ ุงููุตุงุฏูุฉ:', error);
          return;
        }
        
        setUser(user);
        setIsAuthenticated(isAuthenticated);
      } catch (error) {
        console.error('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุชุญูู ูู ุญุงูุฉ ุงููุตุงุฏูุฉ:', error);
      }
    }

    loadAuthStatus();
  }, []);

  return (
    <PaperProvider>
      <Stack screenOptions={{ headerShown: false }} />
    </PaperProvider>
  );
}
```

### ููู ุชุฎุทูุท ูุณุงุฑ ุงููุตุงุฏูุฉ

```typescript
// app/auth/_layout.tsx
import { Stack } from 'expo-router';

export default function AuthLayout() {
  return (
    <Stack
      screenOptions={{
        headerShown: false,
        animation: 'slide_from_right',
      }}
    />
  );
}
```

## ุงูุฎุทูุฉ 8: ุฅูุดุงุก ุตูุญุฉ ููุญุฉ ุชุญูู ุงููุญู (Shop Dashboard)

```typescript
// app/shop/shop-dashboard.tsx
import React, { useEffect, useState } from 'react';
import { View, StyleSheet, ScrollView, RefreshControl } from 'react-native';
import { Text, Card, Button, IconButton } from 'react-native-paper';
import { COLORS, SPACING } from '../constants';
import { useAuthStore } from '../utils/store';
import { getShopByOwnerId } from '../services/shop';
import { useRouter } from 'expo-router';
import { Shop } from '../types';

export default function ShopDashboardScreen() {
  const router = useRouter();
  const { user } = useAuthStore();
  const [shop, setShop] = useState<Shop | null>(null);
  const [loading, setLoading] = useState(true);
  const [refreshing, setRefreshing] = useState(false);

  const loadShopData = async () => {
    if (!user) return;
    
    try {
      const { data, error } = await getShopByOwnerId(user.id);
      if (error) {
        console.error('ูุดู ูู ุชุญููู ุจูุงูุงุช ุงููุญู:', error);
        return;
      }
      
      setShop(data);
    } catch (error) {
      console.error('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุจูุงูุงุช ุงููุญู:', error);
    } finally {
      setLoading(false);
      setRefreshing(false);
    }
  };

  useEffect(() => {
    loadShopData();
  }, [user]);

  const handleRefresh = () => {
    setRefreshing(true);
    loadShopData();
  };

  return (
    <View style={styles.container}>
      <View style={styles.header}>
        <Text style={styles.headerTitle}>ููุญุฉ ุชุญูู ุงููุญู</Text>
        <IconButton icon="refresh" onPress={handleRefresh} />
      </View>
      
      <ScrollView
        contentContainerStyle={styles.content}
        refreshControl={
          <RefreshControl refreshing={refreshing} onRefresh={handleRefresh} />
        }
      >
        {!loading && !shop && (
          <Card style={styles.warningCard}>
            <Card.Content>
              <Text style={styles.warningText}>
                ูู ูุชู ุงูุนุซูุฑ ุนูู ูุญู ููุฐุง ุงูุญุณุงุจ. ูุฑุฌู ุงูุชูุงุตู ูุน ุงูุฅุฏุงุฑุฉ.
              </Text>
            </Card.Content>
          </Card>
        )}
        
        {shop && (
          <>
            <Card style={styles.shopInfoCard}>
              <Card.Title title="ูุนูููุงุช ุงููุญู" />
              <Card.Content>
                <Text style={styles.shopName}>{shop.name}</Text>
                <Text style={styles.shopDetail}>ุงูุนููุงู: {shop.address}</Text>
                <Text style={styles.shopDetail}>ุฑูู ุงููุงุชู: {shop.phone}</Text>
                <Text style={styles.shopStatus}>
                  ุงูุญุงูุฉ: {shop.status === 'approved' ? 'ููุนู' : shop.status === 'pending' ? 'ููุฏ ุงููุฑุงุฌุนุฉ' : 'ูุฑููุถ'}
                </Text>
              </Card.Content>
            </Card>
            
            <View style={styles.actions}>
              <Button
                mode="contained"
                icon="car-info"
                onPress={() => router.push('/shop/add-car')}
                style={styles.actionButton}
              >
                ุฅุถุงูุฉ ุณูุงุฑุฉ
              </Button>
              
              <Button
                mode="contained"
                icon="format-list-bulleted"
                onPress={() => router.push('/shop/cars-list')}
                style={styles.actionButton}
              >
                ูุงุฆูุฉ ุงูุณูุงุฑุงุช
              </Button>
              
              <Button
                mode="contained"
                icon="history"
                onPress={() => router.push('/shop/service-history')}
                style={styles.actionButton}
              >
                ุณุฌู ุงูุฎุฏูุงุช
              </Button>
              
              <Button
                mode="contained"
                icon="qrcode-scan"
                onPress={() => router.push('/shop/scan-car')}
                style={styles.actionButton}
              >
                ูุณุญ ุฑูุฒ QR
              </Button>
            </View>
          </>
        )}
      </ScrollView>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.background,
  },
  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    paddingHorizontal: SPACING.lg,
    paddingVertical: SPACING.md,
    backgroundColor: COLORS.primary,
  },
  headerTitle: {
    fontSize: 20,
    fontWeight: 'bold',
    color: COLORS.white,
  },
  content: {
    padding: SPACING.md,
    flexGrow: 1,
  },
  warningCard: {
    marginVertical: SPACING.md,
    backgroundColor: COLORS.warning + '20', // ุจุฅุถุงูุฉ ุดูุงููุฉ
  },
  warningText: {
    color: COLORS.dark,
    textAlign: 'center',
  },
  shopInfoCard: {
    marginVertical: SPACING.md,
  },
  shopName: {
    fontSize: 18,
    fontWeight: 'bold',
    marginBottom: SPACING.sm,
  },
  shopDetail: {
    fontSize: 14,
    marginBottom: SPACING.xs,
  },
  shopStatus: {
    fontSize: 14,
    fontWeight: 'bold',
    marginTop: SPACING.sm,
    color: COLORS.primary,
  },
  actions: {
    marginTop: SPACING.lg,
  },
  actionButton: {
    marginBottom: SPACING.md,
  },
});
```

## ุงูุฎุทูุฉ 9: ุฅุนุฏุงุฏ ุงูุชููู ูุงูุชูุฌูู ุญุณุจ ููุน ุงููุณุชุฎุฏู

```typescript
// app/index.tsx
import { Redirect } from 'expo-router';
import { useAuthStore } from './utils/store';

export default function Index() {
  const { isAuthenticated, user } = useAuthStore();
  
  if (!isAuthenticated) {
    return <Redirect href="/auth/login" />;
  }
  
  // ุชูุฌูู ุงููุณุชุฎุฏู ุจูุงุกู ุนูู ููุนู
  if (user?.role === 'admin') {
    return <Redirect href="/admin/admin-dashboard" />;
  } else if (user?.role === 'shop_owner') {
    return <Redirect href="/shop/shop-dashboard" />;
  } else {
    return <Redirect href="/customer/customer-dashboard" />;
  }
}
```

## ุงูุฎุทูุฉ 10: ุฅูุดุงุก ูููุงุช ุงูุซูุงุจุช ูุงูุฃููุงู

```typescript
// app/constants/index.ts
export const COLORS = {
  primary: '#2563EB', // Blue
  secondary: '#4ADE80', // Green
  accent: '#F97316', // Orange
  background: '#F8FAFC', // Light gray
  white: '#FFFFFF',
  black: '#1E293B',
  error: '#EF4444', // Red
  success: '#10B981', // Green
  warning: '#F59E0B', // Amber
  info: '#3B82F6', // Light Blue
  dark: '#0F172A', // Dark Blue Grey
  gray: '#64748B',
  lightGray: '#E2E8F0',
};

export const SPACING = {
  xs: 4,
  sm: 8,
  md: 16,
  lg: 24,
  xl: 32,
  xxl: 48,
};

export const FONT_SIZE = {
  xs: 12,
  sm: 14,
  md: 16,
  lg: 18,
  xl: 20,
  xxl: 24,
  xxxl: 32,
};
```

## ุงูุฎุทูุฉ 11: ุชุฎุตูุต ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู Supabase

ูุฅูุดุงุก ุงูุชุทุจููุ ุณุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ุงูุฌุฏุงูู ุงูุชุงููุฉ ูู Supabase:

1. **users** - ูุชุฎุฒูู ุจูุงูุงุช ุงููุณุชุฎุฏููู
2. **shops** - ูุชุฎุฒูู ุจูุงูุงุช ุงููุญูุงุช
3. **cars** - ูุชุฎุฒูู ุจูุงูุงุช ุงูุณูุงุฑุงุช
4. **service_categories** - ูุชุฎุฒูู ูุฆุงุช ุงูุฎุฏูุงุช
5. **service_visits** - ูุชุฎุฒูู ุฒูุงุฑุงุช ุงูุฎุฏูุฉ
6. **vehicle_types** - ูุชุฎุฒูู ุฃููุงุน ุงููุฑูุจุงุช

ุงุณุชุฎุฏู URL ู API Key ููุง ููุถุญ ูู ููู ุงูุชูููู ูุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู Supabase.

## ููุงุญุธุงุช ุฅุถุงููุฉ

1. ูุงุญุธ ุฃู Expo Router ูุญุงูุธ ุนูู ุจููุฉ ูุฌูุฏ `app` ูุฅูุดุงุก ุงููุณุงุฑุงุช ุชููุงุฆููุง.
2. ุชุฃูุฏ ูู ุฅุนุฏุงุฏ ูููุงุช ุงูุชุฎุทูุท ุงูููุงุณุจุฉ (`_layout.tsx`) ููู ูุณุงุฑ.
3. ููููู ุงุณุชุฎุฏุงู Navigator ุงููุฏูุฌ ูุน Expo Router ูุซู Stack ู Tabs ู Drawer.
4. ุงุณุชุฎุฏู `useLocalSearchParams()` ุจุฏูุงู ูู `route.params`.
5. ุงุณุชุฎุฏู `useRouter()` ุจุฏูุงู ูู `navigation.navigate()`.

ุจุงุชุจุงุน ูุฐุง ุงูุฏูููุ ููููู ุฅูุดุงุก ูุณุฎุฉ ูู ุชุทุจูู YazCar ุจุงุณุชุฎุฏุงู Expo Router ุจุฏูุงู ูู React Navigation ุงูุชูููุฏู.
